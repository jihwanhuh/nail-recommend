# -*- coding: utf-8 -*-
"""ui

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1papd4IBOHxK5oHNtmjk3cF1Y-nL-_Nhb
"""

import gradio as gr
from app import run_pipeline

DESIGN_CHOICES = ["nudes", "french", "art", "ombre", "glitter"]

def gradio_predict(img, design_filter):
    allowed = design_filter if design_filter else None
    yolo_img, mask_img, html, overlay_img = run_pipeline(img, allowed_designs=allowed)
    return yolo_img, mask_img, overlay_img, html

with gr.Blocks() as demo:
    gr.Markdown("## ğŸ’… Nail Shape & Design Recommender + Nail Overlay Preview")

    with gr.Row():
        with gr.Column():
            img_in = gr.Image(type="pil", label="ì† ì´ë¯¸ì§€ ì—…ë¡œë“œ")
            design_filter = gr.CheckboxGroup(
                DESIGN_CHOICES,
                label="ë””ìì¸ íƒ€ì… í•„í„° (ì„ íƒ ì•ˆ í•˜ë©´ ì „ì²´)",
            )
            run_btn = gr.Button("ë„¤ì¼ ì¶”ì²œ ì‹¤í–‰")

        with gr.Column():
            yolo_out = gr.Image(type="pil", label="â‘  YOLOv11 ì†í†± ê°ì§€ ê²°ê³¼")
            mask_out = gr.Image(type="pil", label="â‘¡ SAM-HQ ë§ˆìŠ¤í¬ ì‹œê°í™”")
            overlay_out = gr.Image(type="pil", label="â‘¢ TOP2 ë„¤ì¼ í•©ì„± ê²°ê³¼")
            html_out = gr.HTML(label="â‘£ ì¶”ì²œ ê²°ê³¼ (TOP3)")

    run_btn.click(
        fn=gradio_predict,
        inputs=[img_in, design_filter],
        outputs=[yolo_out, mask_out, overlay_out, html_out],
    )


demo   # launch()ëŠ” colabì—ì„œ ì‹¤í–‰